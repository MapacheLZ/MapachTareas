"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2782],{2782:(T,v,s)=>{s.r(v),s.d(v,{AlarmasPageModule:()=>M});var g=s(2200),h=s(4341),e=s(7343),f=s(8132),d=s(467),i=s(1514),A=s(4820),a=s(3664),m=s(2615),b=s(7493),y=s(8991);function k(l,r){if(1&l){const c=a.RV6();a.j41(0,"ion-item",8),a.nrm(1,"ion-icon",9),a.j41(2,"ion-label")(3,"h2"),a.EFF(4),a.k0s(),a.j41(5,"p"),a.EFF(6),a.k0s()(),a.j41(7,"ion-buttons",10)(8,"ion-button",11),a.bIt("click",function(){const o=m.eBV(c).$implicit,n=a.XpG();return m.Njj(n.toggleAlarma(o))}),a.nrm(9,"ion-icon",12),a.k0s(),a.j41(10,"ion-button",13),a.bIt("click",function(){const o=m.eBV(c).$implicit,n=a.XpG();return m.Njj(n.marcarFavorito(o.id))}),a.nrm(11,"ion-icon",12),a.k0s(),a.j41(12,"ion-button",14),a.bIt("click",function(){const o=m.eBV(c).$implicit,n=a.XpG();return m.Njj(n.eliminarAlarma(o.id))}),a.nrm(13,"ion-icon",15),a.k0s()()()}if(2&l){const c=r.$implicit;a.R7$(3),a.AVh("desactivada",!c.activa),a.R7$(),a.JRh(c.titulo),a.R7$(2),a.JRh(c.hora),a.R7$(3),a.Y8G("name",c.activa?"notifications":"notifications-off"),a.R7$(2),a.Y8G("name",c.favorita?"star":"star-outline")}}function F(l,r){1&l&&(a.j41(0,"ion-text",16)(1,"p",17),a.EFF(2,"No tienes alarmas guardadas \u23f0"),a.k0s()())}const _=[{path:"",component:(()=>{var l;class r{constructor(t,o){this.horaApi=t,this.alarmasService=o,this.alarmas=[],this.nuevaHora="",this.nuevoTitulo="",this.botonEstado="normal"}ngOnInit(){var t=this;return(0,d.A)(function*(){t.alarmas=yield t.alarmasService.obtenerAlarmas(),t.verificador=(0,A.Y)(15e3).subscribe(()=>{t.horaApi.obtenerHora().subscribe({next:o=>t.verificarAlarmas(o),error:o=>console.error("Error obteniendo hora:",o)})})})()}ngOnDestroy(){this.verificador?.unsubscribe()}agregarAlarma(){var t=this;return(0,d.A)(function*(){if(!t.nuevaHora||!t.nuevoTitulo.trim())return;const o={id:Date.now(),hora:t.nuevaHora,titulo:t.nuevoTitulo,activa:!0,favorita:!1};yield t.alarmasService.agregarAlarma(o),t.alarmas=yield t.alarmasService.obtenerAlarmas(),t.nuevaHora="",t.nuevoTitulo="",t.pulseBoton()})()}eliminarAlarma(t){var o=this;return(0,d.A)(function*(){yield o.alarmasService.eliminarAlarma(t),o.alarmas=yield o.alarmasService.obtenerAlarmas()})()}toggleAlarma(t){var o=this;return(0,d.A)(function*(){t.activa=!t.activa,yield o.alarmasService.guardarAlarmas(o.alarmas)})()}marcarFavorito(t){var o=this;return(0,d.A)(function*(){yield o.alarmasService.alternarFavorito(t),o.alarmas=yield o.alarmasService.obtenerAlarmas()})()}pulseBoton(){this.botonEstado="pulsado",setTimeout(()=>this.botonEstado="normal",200)}verificarAlarmas(t){const o=t.toTimeString().slice(0,5);for(const n of this.alarmas)n.activa&&n.hora===o&&this.sonarAlarma(n)}sonarAlarma(t){console.log("\u{1f514} \xa1Alarma activada!",t),new Audio("assets/sonido.mp3").play(),t.activa=!1,this.alarmasService.guardarAlarmas(this.alarmas)}static#a=l=()=>(this.\u0275fac=function(o){return new(o||r)(a.rXU(b.u),a.rXU(y.Z))},this.\u0275cmp=a.VBU({type:r,selectors:[["app-alarmas"]],standalone:!1,decls:15,vars:6,consts:[["color","primary"],["slot","start"],[1,"ion-padding"],["type","time","placeholder","Hora",3,"ngModelChange","ngModel"],["placeholder","T\xedtulo",3,"ngModelChange","ngModel"],["color","success",3,"click"],["lines","inset",4,"ngFor","ngForOf"],["color","medium",4,"ngIf"],["lines","inset"],["name","time-outline","slot","start"],["slot","end"],["fill","clear","color","medium",3,"click"],[3,"name"],["fill","clear","color","warning",3,"click"],["fill","clear","color","danger",3,"click"],["name","trash-outline"],["color","medium"],[1,"ion-text-center"]],template:function(o,n){1&o&&(a.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),a.nrm(3,"ion-menu-button"),a.k0s(),a.j41(4,"ion-title"),a.EFF(5,"MapachTareas"),a.k0s()()(),a.j41(6,"ion-content",2)(7,"ion-item")(8,"ion-input",3),a.mxI("ngModelChange",function(u){return a.DH7(n.nuevaHora,u)||(n.nuevaHora=u),u}),a.k0s(),a.j41(9,"ion-input",4),a.mxI("ngModelChange",function(u){return a.DH7(n.nuevoTitulo,u)||(n.nuevoTitulo=u),u}),a.k0s(),a.j41(10,"ion-button",5),a.bIt("click",function(){return n.agregarAlarma()}),a.EFF(11," Agregar "),a.k0s()(),a.j41(12,"ion-list"),a.DNE(13,k,14,6,"ion-item",6),a.k0s(),a.DNE(14,F,3,0,"ion-text",7),a.k0s()),2&o&&(a.R7$(8),a.R50("ngModel",n.nuevaHora),a.R7$(),a.R50("ngModel",n.nuevoTitulo),a.R7$(),a.Y8G("@botonPulse",n.botonEstado),a.R7$(2),a.Y8G("@listaAnimada",void 0),a.R7$(),a.Y8G("ngForOf",n.alarmas),a.R7$(),a.Y8G("ngIf",0===n.alarmas.length))},dependencies:[g.Sq,g.bT,h.BC,h.vS,e.Jm,e.QW,e.W9,e.eU,e.iq,e.$w,e.uz,e.he,e.nf,e.MC,e.IO,e.BC,e.ai,e.Gw],styles:["ion-item[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:10px;transition:transform .2s ease,background-color .2s ease}ion-item[_ngcontent-%COMP%]:hover{background-color:#0000000d;transform:scale(1.01)}ion-label[_ngcontent-%COMP%]   h2.desactivada[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;opacity:.6}ion-button[color=success][_ngcontent-%COMP%]{transition:transform .15s ease}ion-list[_ngcontent-%COMP%]{margin-top:20px}"],data:{animation:[(0,i.hZ)("listaAnimada",[(0,i.kY)("* => *",[(0,i.P)(":enter",[(0,i.iF)({opacity:0,transform:"translateY(-10px)"}),(0,i.yc)(80,[(0,i.i0)("300ms ease-out",(0,i.iF)({opacity:1,transform:"translateY(0)"}))])],{optional:!0}),(0,i.P)(":leave",[(0,i.yc)(50,[(0,i.i0)("200ms ease-in",(0,i.iF)({opacity:0,transform:"translateX(50px)"}))])],{optional:!0})])]),(0,i.hZ)("botonPulse",[(0,i.wk)("normal",(0,i.iF)({transform:"scale(1)"})),(0,i.wk)("pulsado",(0,i.iF)({transform:"scale(1.1)"})),(0,i.kY)("normal <=> pulsado",(0,i.i0)("150ms ease-in-out"))])]}}))}return l(),r})()}];let P=(()=>{var l;class r{static#a=l=()=>(this.\u0275fac=function(o){return new(o||r)},this.\u0275mod=a.$C({type:r}),this.\u0275inj=m.G2t({imports:[f.iI.forChild(_),f.iI]}))}return l(),r})(),M=(()=>{var l;class r{static#a=l=()=>(this.\u0275fac=function(o){return new(o||r)},this.\u0275mod=a.$C({type:r}),this.\u0275inj=m.G2t({imports:[g.MD,h.YN,e.bv,P]}))}return l(),r})()}}]);