"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5799],{5799:(me,W,b)=>{b.r(W),b.d(W,{PerfilPageModule:()=>le});var D=b(2200),T=b(4341),g=b(7343),H=b(8132),u=b(467),O=function(o){return o.Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",o}(O||{});class U extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const X=o=>{const e=o.CapacitorCustomPlatform||null,t=o.Capacitor||{},i=t.Plugins=t.Plugins||{},r=()=>null!==e?e.name:(o=>{var e,t;return o?.androidBridge?"android":null!==(t=null===(e=o?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(o),s=f=>{var m;return null===(m=t.PluginHeaders)||void 0===m?void 0:m.find(R=>R.name===f)},d=new Map;return t.convertFileSrc||(t.convertFileSrc=f=>f),t.getPlatform=r,t.handleError=f=>o.console.error(f),t.isNativePlatform=()=>"web"!==r(),t.isPluginAvailable=f=>{const m=d.get(f);return!(!m?.platforms.has(r())&&!s(f))},t.registerPlugin=(f,m={})=>{const R=d.get(f);if(R)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),R.proxy;const A=r(),x=s(f);let y;const ue=function(){var p=(0,u.A)(function*(){return!y&&A in m?y=y="function"==typeof m[A]?yield m[A]():m[A]:null!==e&&!y&&"web"in m&&(y=y="function"==typeof m.web?yield m.web():m.web),y});return function(){return p.apply(this,arguments)}}(),M=p=>{let h;const P=(...E)=>{const C=ue().then(v=>{const _=((p,h)=>{var P,E;if(!x){if(p)return null===(E=p[h])||void 0===E?void 0:E.bind(p);throw new U(`"${f}" plugin is not implemented on ${A}`,O.Unimplemented)}{const C=x?.methods.find(v=>h===v.name);if(C)return"promise"===C.rtype?v=>t.nativePromise(f,h.toString(),v):(v,_)=>t.nativeCallback(f,h.toString(),v,_);if(p)return null===(P=p[h])||void 0===P?void 0:P.bind(p)}})(v,p);if(_){const F=_(...E);return h=F?.remove,F}throw new U(`"${f}.${p}()" is not implemented on ${A}`,O.Unimplemented)});return"addListener"===p&&(C.remove=(0,u.A)(function*(){return h()})),C};return P.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:p,writable:!1,configurable:!1}),P},z=M("addListener"),J=M("removeListener"),fe=(p,h)=>{const P=z({eventName:p},h),E=function(){var v=(0,u.A)(function*(){const _=yield P;J({eventName:p,callbackId:_},h)});return function(){return v.apply(this,arguments)}}(),C=new Promise(v=>P.then(()=>v({remove:E})));return C.remove=(0,u.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield E()}),C},B=new Proxy({},{get(p,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?fe:z;case"removeListener":return J;default:return M(h)}}});return i[f]=B,d.set(f,{name:f,proxy:B,platforms:new Set([...Object.keys(m),...x?[A]:[]])}),B},t.Exception=U,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},$=(o=>o.Capacitor=X(o))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),I=$.registerPlugin;class S{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){var i=this;let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const s=function(){var d=(0,u.A)(function*(){return i.removeListener(e,t)});return function(){return d.apply(this,arguments)}}();return Promise.resolve({remove:s})}removeAllListeners(){var e=this;return(0,u.A)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t,i){const r=this.listeners[e];if(r)r.forEach(n=>n(t));else if(i){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!(null===(t=this.listeners[e])||void 0===t||!t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new $.Exception(e,O.Unimplemented)}unavailable(e="not available"){return new $.Exception(e,O.Unavailable)}removeListener(e,t){var i=this;return(0,u.A)(function*(){const r=i.listeners[e];if(!r)return;const n=r.indexOf(t);i.listeners[e].splice(n,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const G=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),V=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends S{getCookies(){return(0,u.A)(function*(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[r,n]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=V(r).trim(),n=V(n).trim(),t[r]=n}),t})()}setCookie(e){return(0,u.A)(function*(){try{const t=G(e.key),i=G(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${r}; path=${n}; ${a};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,u.A)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,u.A)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,u.A)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}I("CapacitorCookies",{web:()=>new Q});const Z=function(){var o=(0,u.A)(function*(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>{const n=r.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>i(n),r.readAsDataURL(e)})});return function(t){return o.apply(this,arguments)}}();class re extends S{request(e){return(0,u.A)(function*(){const t=((o,e={})=>{const t=Object.assign({method:o.method||"GET",headers:o.headers},e),r=((o={})=>{const e=Object.keys(o);return Object.keys(o).map(r=>r.toLocaleLowerCase()).reduce((r,n,a)=>(r[n]=o[e[a]],r),{})})(o.headers)["content-type"]||"";if("string"==typeof o.data)t.body=o.data;else if(r.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[a,s]of Object.entries(o.data||{}))n.set(a,s);t.body=n.toString()}else if(r.includes("multipart/form-data")||o.data instanceof FormData){const n=new FormData;if(o.data instanceof FormData)o.data.forEach((s,l)=>{n.append(l,s)});else for(const s of Object.keys(o.data))n.append(s,o.data[s]);t.body=n;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(r.includes("application/json")||"object"==typeof o.data)&&(t.body=JSON.stringify(o.data));return t})(e,e.webFetchExtra),i=((o,e=!0)=>o?Object.entries(o).reduce((i,r)=>{const[n,a]=r;let s,l;return Array.isArray(a)?(l="",a.forEach(d=>{s=e?encodeURIComponent(d):d,l+=`${n}=${s}&`}),l.slice(0,-1)):(s=e?encodeURIComponent(a):a,l=`${n}=${s}`),`${i}&${l}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=i?`${e.url}?${i}`:e.url,n=yield fetch(r,t),a=n.headers.get("content-type")||"";let l,d,{responseType:s="text"}=n.ok?e:{};switch(a.includes("application/json")&&(s="json"),s){case"arraybuffer":case"blob":d=yield n.blob(),l=yield Z(d);break;case"json":l=yield n.json();break;default:l=yield n.text()}const L={};return n.headers.forEach((f,m)=>{L[m]=f}),{data:l,headers:L,status:n.status,url:n.url}})()}get(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,u.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}I("CapacitorHttp",{web:()=>new re});var k=function(o){return o.Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS",o}(k||{}),j=function(o){return o.Rear="REAR",o.Front="FRONT",o}(j||{}),q=function(o){return o.Uri="uri",o.Base64="base64",o.DataUrl="dataUrl",o}(q||{});class K extends S{getPhoto(e){var t=this;return(0,u.A)(function*(){return new Promise(function(){var i=(0,u.A)(function*(r,n){if(e.webUseInput||e.source===k.Photos)t.fileInputExperience(e,r,n);else if(e.source===k.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",function(){var s=(0,u.A)(function*(l){0===l.detail?t.fileInputExperience(e,r,n):t.cameraExperience(e,r,n)});return function(l){return s.apply(this,arguments)}}())}else t.cameraExperience(e,r,n)});return function(r,n){return i.apply(this,arguments)}}())})()}pickImages(e){var t=this;return(0,u.A)(function*(){return new Promise(function(){var i=(0,u.A)(function*(r,n){t.multipleFileInputExperience(r,n)});return function(r,n){return i.apply(this,arguments)}}())})()}cameraExperience(e,t,i){var r=this;return(0,u.A)(function*(){if(customElements.get("pwa-camera-modal")){const n=document.createElement("pwa-camera-modal");n.facingMode=e.direction===j.Front?"user":"environment",document.body.appendChild(n);try{yield n.componentOnReady(),n.addEventListener("onPhoto",function(){var a=(0,u.A)(function*(s){const l=s.detail;null===l?i(new U("User cancelled photos app")):l instanceof Error?i(l):t(yield r._getCameraPhoto(l,e)),n.dismiss(),document.body.removeChild(n)});return function(s){return a.apply(this,arguments)}}()),n.present()}catch{r.fileInputExperience(e,t,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),r.fileInputExperience(e,t,i)})()}fileInputExperience(e,t,i){let r=document.querySelector("#_capacitor-camera-input");const n=()=>{var a;null===(a=r.parentNode)||void 0===a||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",a=>{const s=r.files[0];let l="jpeg";if("image/png"===s.type?l="png":"image/gif"===s.type&&(l="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const d=new FileReader;d.addEventListener("load",()=>{if("dataUrl"===e.resultType)t({dataUrl:d.result,format:l});else if("base64"===e.resultType){const L=d.result.split(",")[1];t({base64String:L,format:l})}n()}),d.readAsDataURL(s)}else t({webPath:URL.createObjectURL(s),format:l}),n()}),r.addEventListener("cancel",a=>{i(new U("User cancelled photos app")),n()})),r.accept="image/*",r.capture=!0,e.source===k.Photos||e.source===k.Prompt?r.removeAttribute("capture"):e.direction===j.Front?r.capture="user":e.direction===j.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(e,t){let i=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var n;null===(n=i.parentNode)||void 0===n||n.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",n=>{const a=[];for(let s=0;s<i.files.length;s++){const l=i.files[s];let d="jpeg";"image/png"===l.type?d="png":"image/gif"===l.type&&(d="gif"),a.push({webPath:URL.createObjectURL(l),format:d})}e({photos:a}),r()}),i.addEventListener("cancel",n=>{t(new U("User cancelled photos app")),r()})),i.accept="image/*",i.click()}_getCameraPhoto(e,t){return new Promise((i,r)=>{const n=new FileReader,a=e.type.split("/")[1];"uri"===t.resultType?i({webPath:URL.createObjectURL(e),format:a,saved:!1}):(n.readAsDataURL(e),n.onloadend=()=>{const s=n.result;i("dataUrl"===t.resultType?{dataUrl:s,format:a,saved:!1}:{base64String:s.split(",")[1],format:a,saved:!1})},n.onerror=s=>{r(s)})})}checkPermissions(){var e=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw e.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw e.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var e=this;return(0,u.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var e=this;return(0,u.A)(function*(){throw e.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var e=this;return(0,u.A)(function*(){throw e.unavailable("Not implemented on web.")})()}}new K;const ne=I("Camera",{web:()=>new K});var c=b(3664),w=b(2615),ie=b(7291);function oe(o,e){if(1&o&&c.nrm(0,"img",10),2&o){const t=c.XpG();c.Y8G("src",t.fotoPerfil,c.B4B)}}function ae(o,e){1&o&&c.nrm(0,"ion-icon",11)}const se=[{path:"",component:(()=>{var o;class e{constructor(i){this.storageService=i,this.nombreUsuario="",this.fotoPerfil=null}ionViewWillEnter(){var i=this;return(0,u.A)(function*(){const r=yield i.storageService._storage?.get("perfil");r&&(i.nombreUsuario=r.nombre||"",i.fotoPerfil=r.foto||null)})()}tomarFoto(){var i=this;return(0,u.A)(function*(){try{const r=yield ne.getPhoto({quality:80,allowEditing:!1,resultType:q.DataUrl,source:k.Prompt});i.fotoPerfil=r.dataUrl,i.guardarPerfil()}catch(r){console.error("Error al tomar la foto:",r)}})()}guardarPerfil(){var i=this;return(0,u.A)(function*(){const r={nombre:i.nombreUsuario,foto:i.fotoPerfil};yield i.storageService._storage?.set("perfil",r),console.log("Perfil guardado correctamente \u2705")})()}static#e=o=()=>(this.\u0275fac=function(r){return new(r||e)(c.rXU(ie.n))},this.\u0275cmp=c.VBU({type:e,selectors:[["app-perfil"]],standalone:!1,decls:18,vars:3,consts:[["placeholder",""],["color","dark"],["slot","start"],[1,"ion-padding"],[1,"perfil-container"],[1,"foto-container",3,"click"],["alt","Foto de perfil",3,"src",4,"ngIf","ngIfElse"],["position","floating"],[3,"ngModelChange","ngModel"],["expand","block","color","success",3,"click"],["alt","Foto de perfil",3,"src"],["name","person-circle-outline","size","large"]],template:function(r,n){if(1&r){const a=c.RV6();c.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-buttons",2),c.nrm(3,"ion-menu-button"),c.k0s(),c.j41(4,"ion-title"),c.EFF(5,"Perfil"),c.k0s()()(),c.j41(6,"ion-content",3)(7,"div",4)(8,"div",5),c.bIt("click",function(){return w.eBV(a),w.Njj(n.tomarFoto())}),c.DNE(9,oe,1,1,"img",6)(10,ae,1,0,"ng-template",null,0,c.C5r),c.k0s(),c.j41(12,"ion-item")(13,"ion-label",7),c.EFF(14,"Nombre de usuario"),c.k0s(),c.j41(15,"ion-input",8),c.mxI("ngModelChange",function(l){return w.eBV(a),c.DH7(n.nombreUsuario,l)||(n.nombreUsuario=l),w.Njj(l)}),c.k0s()(),c.j41(16,"ion-button",9),c.bIt("click",function(){return w.eBV(a),w.Njj(n.guardarPerfil())}),c.EFF(17," Guardar perfil "),c.k0s()()()}if(2&r){const a=c.sdS(11);c.R7$(9),c.Y8G("ngIf",n.fotoPerfil)("ngIfElse",a),c.R7$(6),c.R50("ngModel",n.nombreUsuario)}},dependencies:[D.bT,T.BC,T.vS,g.Jm,g.QW,g.W9,g.eU,g.iq,g.$w,g.uz,g.he,g.MC,g.BC,g.ai,g.Gw],styles:[".perfil-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;margin-top:40px}.foto-container[_ngcontent-%COMP%]{width:130px;height:130px;border-radius:50%;overflow:hidden;background:#222;display:flex;justify-content:center;align-items:center;cursor:pointer;border:2px solid #444;transition:transform .2s}.foto-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]}))}return o(),e})()}];let ce=(()=>{var o;class e{static#e=o=()=>(this.\u0275fac=function(r){return new(r||e)},this.\u0275mod=c.$C({type:e}),this.\u0275inj=w.G2t({imports:[H.iI.forChild(se),H.iI]}))}return o(),e})(),le=(()=>{var o;class e{static#e=o=()=>(this.\u0275fac=function(r){return new(r||e)},this.\u0275mod=c.$C({type:e}),this.\u0275inj=w.G2t({imports:[D.MD,T.YN,g.bv,ce]}))}return o(),e})()}}]);